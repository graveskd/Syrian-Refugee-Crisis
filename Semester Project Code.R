library(XLConnect)
library(XLConnectJars)
library(rJava)
library(zoo)
library(lubridate)
library(date)
library(ggmap)
library(ggplot2)
library(gdata)
library(xlsx)
library(xlsxjars)
library(orloca)
library(skmeans)
tents<-read.xlsx2("List of Informal Settlements_2014_10_03.xlsx",sheetName="IAMP7")
tents<-as.data.frame(tents)
tents$date<-as.numeric(as.character(tents$Date.the.site.was.created))
tents$date<-as.date(tents$date)
tents$date<-as.POSIXct(tents$date)-(60*365*24*60*60)
tents$date<-as.Date(tents$date)
tents$Longitude<-as.numeric(as.character(tents$Longitude))
tents$Latitude<-as.numeric(as.character(tents$Latitude))
tents$Number.of.tents<-as.numeric(as.character(tents$Number.of.tents))
tents$Number.of.Individuals<-as.numeric(as.character(tents$Number.of.Individuals))
nas<-tents[(is.na(tents$date)),]
nas$date<-mdy(nas$Date.the.site.was.created)
nas<-subset(nas,!is.na(date))
tents<-subset(tents,!is.na(date))
tents<-rbind(tents,nas)
tents$month<-as.yearmon(tents$date)
tents$year<-as.numeric(format(tents$date,"%Y"))
tents$pplptent<-tents$Number.of.Individuals/tents$Number.of.tents
bl<-get_map(location=c(35.8244200,33.8889400),source="google",
maptype="terrain",crop=FALSE)
overlay<-stat_density2d(aes(Longitude,Latitude,fill=..level..),data=tents,geom="polygon")
(guide="none")
ggmap(bl)+overlay+geom_point(aes(Longitude,Latitude,color=tents$pplptent)
,size=2,data=tents)+scale_colour_gradient(expression(People_Per_Tent),low="red",high="green")